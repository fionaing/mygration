{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <div class="row mt-3">
    <div class="col mx-auto mb-3">

      <div class="d-flex justify-content-between align-items-center">
        <h2 class="mb-0">My Plans</h2>
        <a href="{% url 'accounts.add_plan' %}" class="btn btn-primary">
          Add Plan
        </a>
      </div>
      <hr />

      {% if plans %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Location</th>
              <th>Created</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for plan in plans %}
              <tr>
                <td>{{ plan.name }}</td>
                <td>{{ plan.location }}</td>
                <td>{{ plan.date|date:"Y-m-d H:i" }}</td>

                <!-- action buttons -->
                <td class="text-end">
                  <a href="{% url 'accounts.edit_plan' plan.pk %}"
                     class="btn btn-sm btn-outline-primary me-2">
                    Edit
                  </a>

                  <form action="{% url 'accounts.delete_plan' plan.pk %}"
                        method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit"
                            class="btn btn-sm btn-outline-danger">
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-muted">You donâ€™t have any plans yet.</p>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
